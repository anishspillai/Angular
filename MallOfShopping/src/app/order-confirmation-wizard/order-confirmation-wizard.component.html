<div id="content-desktop">

    <div class="jumbotron-local color-grey-light" style="margin-top: 80px; padding: 0">
      <div class="d-flex align-items-center">
        <div class="container text-center py-lg-3">
          <h3 class="fs-1 text-dark">Order Confirmation</h3>
        </div>
      </div>
    </div>

<br>
  <section>
    <div class="row m-5">
      <div class="col-lg-8">
          <div class="card wish-list shadow-sm">
            <div class="card-body shadow-lg">

              <span class="mb-2 font-weight-bold text-uppercase">Billing details</span>

              <!-- Grid row -->
              <div class="row">
                <app-user-details [displayHeader]="false"></app-user-details>
              </div>
          </div>
          </div>
          <!-- Card -->


















        <!-- Card -->
        <!--div class="card mb-3">
          <div class="card-body">

            <h5 class="mb-4">Expected shipping delivery</h5>

            <p class="mb-0"> Thu., 12.03. - Mon., 16.03.</p>
          </div>
        </div-->
        <!-- Card -->

        <!-- Card -->
        <div class="card mb-3 p-shadow-10">
          <div class="card-body">

            <h5 class="mb-4">We accept</h5>

            <img class="mr-2" width="65px"
                 src="../assets/img/kroner.jpeg"
                 alt="Swedish Kroner">
            <img class="mr-2" width="50px"
                 src="../assets/img/swish.png"
                 alt="Swish">
          </div>
        </div>
        <!-- Card -->

      </div>
      <!--Grid column-->

      <!--Grid column-->
      <div class="col-lg-4">

        <!-- Card -->
        <div class="card mb-3  shadow-lg">
          <div class="card-body">


            <ul class="list-group list-group-flush">

              <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3">
                <div>
                  <strong class="text-info">The total amount of</strong>
                  <small>
                    <p class="mb-0 text-success">(including 12% MOMS)</p>
                  </small>
                </div>
                <span><strong class="text-info">Kr {{getTotalCostOfOrderedItemsIncludingDeliveryCharge() }}</strong></span>
              </li>
            </ul>

            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#orderConfirmationModel" [disabled]="orderBeingPlaced" (click)="placeOrder()">
              Click to Place Order
            </button>

          </div>
        </div>
        <!-- Card -->

        <!-- Card -->
        <div class="card mb-3 shadow-lg">
          <div class="card-body">

            <a class="text-muted d-flex justify-content-between" data-toggle="collapse" href="#collapseExample1"
               aria-expanded="false" aria-controls="collapseExample1">
              Add a discount code (optional)
            </a>

            <div class="collapse" id="collapseExample1">
              <div class="mt-3">
                <div class="md-form md-outline mb-0">
                  <input type="text" id="discount-code1" class="form-control font-weight-light"
                         placeholder="Enter discount code">
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Card -->

      </div>
      <!--Grid column-->

    </div>
    <!--Grid row-->

  </section>
  <!--Section: Block Content-->


  </div>


<div *ngIf="isMobileDevice" style="display: block; margin-top: 1em; margin-left: auto; margin-right: auto; color: black;">

  <div style="align-content: center; text-align: center; font-family: 'Trebuchet MS'; font-style: oblique; font-size: medium; color: #343a40"> Order Confirmation </div>

  <p-accordion [multiple]="true">
    <p-accordionTab header="Delivery Address">

      <div class="p-col-12">
        <app-user-details></app-user-details>
        <br>
        <br>
      </div>
    </p-accordionTab>

    <p-accordionTab header="Desired Delivery Time">
      <div class="p-col-12">
        <app-ng-time-picker [isDesktopApplication]="false" (closeCalenderEventEmitter) = "deliveryDate = $event"></app-ng-time-picker>
      </div>
    </p-accordionTab>

    <p-accordionTab header="Payment Options">
      <div class="p-col-12">
        <app-payment-option-view></app-payment-option-view>
      </div>
    </p-accordionTab>

    <p-accordionTab header="Any Comments">
      <div class="p-col-12">
        <textarea rows="5" cols="35%" pInputTextarea [(ngModel)]="commentsFromCustomer"></textarea>
      </div>
    </p-accordionTab>

  </p-accordion>

  <div class="p-col-12">
    <button pButton class="ui-button-rounded ui-button-success" style="width: 100%" label="Confirm Order" (click)="placeOrder()" ></button>
  </div>
  <div class="p-col-12">
    <button pButton class="ui-button-rounded ui-button-danger" style="width: 100%" label="Cancel Order"
            (click)="cancelThisPage()"></button>
  </div>

</div>

<p-confirmDialog [style]="{width: '50vw'}"></p-confirmDialog>


<!--p-dialog [(visible)]="displayThankYouDialog" header="Order Placed!!!" [style]="{width: '360px'}"
          (onHide)="navigateToTheMainPage()">
  <div>
    Thank you for placing the order!!!. Please check the Order History Page for viewing your orders and status of deliveries.
  </div>
  <p-footer>
    <button pButton type="button" label="close" icon="pi pi-times" class="ui-button-secondary"
            (click)="displayThankYouDialog = false; orderBeingPlaced = false"></button>
  </p-footer>
</p-dialog-->


<p-dialog [(visible)]="displayErrorDialog" header="Sorry Order not placed!!!" [style]="{width: '360px'}"
          (onHide)="navigateToTheMainPage()">

  <div>
    <i class="pi pi-exclamation-triangle" style="color: red"></i>
    So Sorry!!!, There is some issue in placing the order. Kindly contact 0767534932 or mallofgroceries@gmail.com.
  </div>

  <p-footer>
    <button pButton type="button" label="close" icon="pi pi-times" class="ui-button-secondary"
            (click)="displayErrorDialog = false"></button>
  </p-footer>

</p-dialog>


<p-dialog [(visible)]="displayAddressMissingDialog" header="Missing Delivery Address!!!" [style]="{width: '360px'}">
  <div>
    Delivery Address is Missing!!!. Please add it and try again.
  </div>
  <p-footer>
    <button pButton type="button" label="close" icon="pi pi-times" class="ui-button-secondary"
            (click)="displayAddressMissingDialog = false"></button>
  </p-footer>
</p-dialog>


<div class="modal fade" id="orderConfirmationModel" tabindex="-1" role="dialog"
     aria-labelledby="orderConfirmationModelLabel" aria-hidden="true" (focusout)="navigateToTheMainPage()">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header card-header-bg">
        <h5 class="modal-title" id="orderConfirmationModelLabel">Order Confirmation</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body card-body-bg">
        <span *ngIf="displayThankYouDialog">Thank you for placing the order. By closing this page, you will
          be directed to the order history page, which displays all your order histories,
          including the current one.
        </span>

        <div *ngIf="!displayThankYouDialog">
          <p>Please wait, Order placement in progress</p>
          <div class="d-flex justify-content-center">
            <div class="spinner-grow bg-info" style="width: 3rem; height: 3rem;" role="status">
            </div>
          </div>
        </div>
      </div>


      <div *ngIf="outOfStockOrders && outOfStockOrders.length >0">
        <div class="alert alert-warning mt-2 m-2" role="alert">
          <small>Unfortunately below items are not available in required quantities!</small>
        </div>

        <table class="table">
          <thead>
          <tr class="bg-light text-small">
            <th scope="col">#</th>
            <th scope="col">Brand</th>
            <th scope="col">Item</th>
            <th scope="col">Weight</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let order of outOfStockOrders; let i = index" class="text-muted text-small">
            <th scope="row">{{i+1}}</th>
            <td>{{order.groceryName}}</td>
            <td>{{order.type}}</td>
            <td>{{order.grossWeight}} {{order.unitOfWeight}}</td>
          </tr>
          </tbody>
        </table>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="navigateToTheMainPage()">Close
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
